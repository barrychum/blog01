---
title: "9. 11ty collapsible sidebar"
date: 2026-02-06
tags: 
  - "11ty"
---
{% raw %}
Creating a collapsible "Year > Month" tree structure is a great way to organize a blog as it grows. To do this, we'll use 11ty's **JavaScript Data Files** to group the posts and the HTML <details> and <summary> tags to handle the "collapsible" part without needing complex JavaScript.

### **1. Create the Grouping Logic**

We need to tell 11ty how to group posts by year and month. Create a folder named _data (if you don't have one) and create a file inside called archives.js.  
**File:** _data/archives.js

JavaScript

module.exports = (data) => {  
  const posts = data.collections.post || [];  
  const structure = {};

  posts.forEach(post => {  
    const year = post.date.getFullYear();  
    const month = post.date.toLocaleString('default', { month: 'long' });

    if (!structure[year]) structure[year] = {};  
    if (!structure[year][month]) structure[year][month] = [];

    structure[year][month].push(post);  
  });

  return structure;  
};

### ---

**2. Update the Sidebar in the Layout**

Now, we’ll change the sidebar in _includes/layout.njk to loop through this new archives object. We will use the native HTML tags:

* <details>: Creates the collapsible container.  
* <summary>: Creates the clickable heading.

**Update your <aside> in layout.njk:**

HTML

<aside>  
  <h3>Archive</h3>  
  <div class="archive-tree">  
    {# Loop through Years (descending) #}  
    {% for year, months in archives | dictsort | reverse %}  
      <details open>  
        <summary><strong>{{ year }}</strong></summary>  
          
        <div style="margin-left: 15px;">  
          {# Loop through Months #}  
          {% for month, posts in months %}  
            <details>  
              <summary>{{ month }} ({{ posts.length }})</summary>  
              <ul class="post-list" style="margin-left: 15px;">  
                {% for post in posts | reverse %}  
                  <li>  
                    <a href="{{ post.url }}">{{ post.data.title }}</a>  
                  </li>  
                {% endfor %}  
              </ul>  
            </details>  
          {% endfor %}  
        </div>  
      </details>  
    {% endfor %}  
  </div>  
</aside>

*(Note: I added open to the Year so the current year is visible by default, but you can remove it if you want everything closed.)*

### ---

**3. Add a touch of CSS**

To make the tree look cleaner, add this to your <style> block:

CSS

.archive-tree details {  
  margin-bottom: 5px;  
}  
.archive-tree summary {  
  cursor: pointer;  
  padding: 2px 0;  
  list-style: none; /* Removes default arrow in some browsers */  
}  
.archive-tree summary:hover {  
  color: #007bff;  
}  
/* Optional: Adds a custom arrow */  
.archive-tree summary::before {  
  content: "▶ ";  
  font-size: 0.8em;  
}  
.archive-tree details[open] > summary::before {  
  content: "▼ ";  
}

### **How it works**

1. **The Data File:** 11ty automatically processes anything in the _data folder. Our script organizes your posts into a "nested object" like this: 2026 -> February -> [Post 1, Post 2].  
2. **The Layout:** We use the dictsort filter because JavaScript objects don't always keep their order. reverse ensures 2026 appears above 2025.  
3. **No JS Required:** The <details> tag is handled by the browser, meaning your site stays fast and works even if a user has JavaScript disabled.

### **4. Push to Cloudflare**

Bash

git add .  
git commit -m "Add collapsible year-month archive"  
git push origin main

**Would you like me to show you how to add a search bar to the top of this sidebar?**
{% endraw %}