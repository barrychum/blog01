<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title }}</title>

<style>
  /* Base Styles */
  body { 
    font-family: sans-serif; 
    max-width: 1000px; 
    margin: 40px auto; 
    padding: 0 20px; 
    line-height: 1.6; 
  }

  nav { 
    margin-bottom: 20px; 
    border-bottom: 1px solid #eee; 
    padding-bottom: 10px; 
  }

  /* Layout Container */
  .container { 
    display: flex; 
    flex-direction: column; 
    gap: 30px; 
  }

  aside { 
    border-top: 1px solid #eee; 
    padding-top: 20px; 
  }

  /* Desktop View */
  @media (min-width: 768px) {
    .container { 
      flex-direction: row; 
    }
    main { flex: 3; }
    aside { 
      flex: 1; 
      border-top: none; 
      border-left: 1px solid #eee; 
      padding-left: 20px; 
      padding-top: 0;
    }
  }

  /* Post Lists and Navigation */
  .post-list { list-style: none; padding: 0; }
  .post-list li { margin-bottom: 10px; }

  .post-nav {
    display: flex;
    justify-content: space-between;
    margin-top: 40px;
    padding-top: 20px;
  }
  .post-nav div { flex: 1; }

  /* Archive Tree Styles */
  .archive-tree details {
    margin-bottom: 5px;
  }
  .archive-tree summary {
    cursor: pointer;
    padding: 2px 0;
    list-style: none;
  }
  .archive-tree summary:hover {
    color: #007bff;
  }
  .archive-tree summary::before {
    content: "▶ ";
    font-size: 0.8em;
  }
  .archive-tree details[open] > summary::before {
    content: "▼ ";
  }
</style>

</head>
<body>
  <nav><a href="/">Home</a> | <a href="/about/">About</a></nav>

  <div class="container">
<!--
    <main>
      <h1>{{ title }}</h1>
      {{ content | safe }}
    </main>
-->

<main>



  <h1>{{ title }}</h1>
  {# Show date and read time only if it's a post #}
    {% if tags and "post" in tags %}
      {{ page.date | postDate }} • <span>{{ content | readTime }}</span>
    {% endif %}
  {{ content | safe }}

  <hr>

  {# Pagination Logic #}
  {% if tags and "post" in tags %}
    <nav class="post-nav">
      {% set previousPost = collections.post | getPreviousCollectionItem(page) %}
      {% set nextPost = collections.post | getNextCollectionItem(page) %}

      <div>
        {% if previousPost %}
          <strong>Previous:</strong><br>
          <a href="{{ previousPost.url }}">{{ previousPost.data.title }}</a>
        {% endif %}
      </div>

      <div style="text-align: right;">
        {% if nextPost %}
          <strong>Next:</strong><br>
          <a href="{{ nextPost.url }}">{{ nextPost.data.title }}</a>
        {% endif %}
      </div>
    </nav>
  {% endif %}
</main>




<!-- 
    <aside>
      <h3>All Posts</h3>
      <ul class="post-list">
        {% for post in collections.post %}
          <li><a href="{{ post.url }}">{{ post.data.title }}</a></li>
        {% endfor %}
      </ul>
    </aside>
 -->

<!--
<aside>
  <h3>Recent Posts</h3>
  <ul class="post-list">
    {# We add | reverse to show newest first #}
    {% for post in collections.post | reverse %}
      <li>
        <a href="{{ post.url }}">{{ post.data.title }}</a><br>
        <small>{{ post.date.toDateString() }}</small> 
        <small>{{ post.date | postDate }}</small>
      </li>
    {% endfor %}
  </ul>
</aside>
-->


<aside>
  <h3>Archive</h3>
  <div class="archive-tree">
    {# Loop through Years (descending) #}
    {% for year, months in archives | dictsort | reverse %}
      <details open>
        <summary><strong>{{ year }}</strong></summary>
        
        <div style="margin-left: 15px;">
          {# Loop through Months #}
          {% for month, posts in months %}
            <details>
              <summary>{{ month }} ({{ posts.length }})</summary>
              <ul class="post-list" style="margin-left: 15px;">
                {% for post in posts | reverse %}
                  <li>
                    <a href="{{ post.url }}">{{ post.data.title }}</a>
                  </li>
                {% endfor %}
              </ul>
            </details>
          {% endfor %}
        </div>
      </details>
    {% endfor %}
  </div>
</aside>

  </div>
</body>
</html>